define(function(require){return function(e){(function(e){"use strict";e.expr[":"].icontains=function(i,s,n){return t(e(i).text(),n[3])};e.expr[":"].aicontains=function(i,s,n){return t(e(i).data("normalizedText")||e(i).text(),n[3])};function t(e,t){return e.toUpperCase().indexOf(t.toUpperCase())>-1}function i(t){var i=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];e.each(i,function(){t=t.replace(this.re,this.ch)});return t}function s(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var i="(?:"+Object.keys(t).join("|")+")",s=new RegExp(i),n=new RegExp(i,"g"),o=e==null?"":""+e;return s.test(o)?o.replace(n,function(e){return t[e]}):o}var n=function(t,i,s){if(s){s.stopPropagation();s.preventDefault()}this.$element=e(t);this.$newElement=null;this.$button=null;this.$menu=null;this.$lis=null;this.options=i;if(this.options.title===null){this.options.title=this.$element.attr("title")}this.val=n.prototype.val;this.render=n.prototype.render;this.refresh=n.prototype.refresh;this.setStyle=n.prototype.setStyle;this.selectAll=n.prototype.selectAll;this.deselectAll=n.prototype.deselectAll;this.destroy=n.prototype.remove;this.remove=n.prototype.remove;this.show=n.prototype.show;this.hide=n.prototype.hide;this.init()};n.VERSION="1.6.3";n.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:function(e,t){return e==1?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){var i=[];i[0]=e==1?"Limit reached ({n} item max)":"Limit reached ({n} items max)";i[1]=t==1?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)";return i},selectAllText:"Select All",deselectAllText:"Deselect All",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:false,container:false,hideDisabled:false,showSubtext:false,showIcon:true,showContent:true,dropupAuto:true,header:false,liveSearch:false,actionsBox:false,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:false,mobile:false,selectOnTab:false,dropdownAlignRight:false,searchAccentInsensitive:false};n.prototype={constructor:n,init:function(){var t=this,i=this.$element.attr("id");this.$element.hide();this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement);this.$menu=this.$newElement.find("> .dropdown-menu");this.$button=this.$newElement.find("> button");this.$searchbox=this.$newElement.find("input");if(this.options.dropdownAlignRight)this.$menu.addClass("dropdown-menu-right");if(typeof i!=="undefined"){this.$button.attr("data-id",i);e('label[for="'+i+'"]').click(function(e){e.preventDefault();t.$button.focus()})}this.checkDisabled();this.clickListener();if(this.options.liveSearch)this.liveSearchListener();this.render();this.liHeight();this.setStyle();this.setWidth();if(this.options.container)this.selectPosition();this.$menu.data("this",this);this.$newElement.data("this",this);if(this.options.mobile)this.mobile()},createDropdown:function(){var t=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",s=this.autofocus?" autofocus":"",n=this.$element.parents().hasClass("form-group-lg")?" btn-lg":this.$element.parents().hasClass("form-group-sm")?" btn-sm":"";var o=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"";var a=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="input-block-level form-control" autocomplete="off" /></div>':"";var l=this.options.actionsBox?'<div class="bs-actionsbox">'+'<div class="btn-group btn-block">'+'<button class="actions-btn bs-select-all btn btn-sm btn-default">'+this.options.selectAllText+"</button>"+'<button class="actions-btn bs-deselect-all btn btn-sm btn-default">'+this.options.deselectAllText+"</button>"+"</div>"+"</div>":"";var d='<div class="btn-group bootstrap-select'+t+i+'">'+'<button type="button" class="btn dropdown-toggle selectpicker'+n+'" data-toggle="dropdown"'+s+">"+'<span class="filter-option pull-left"></span>&nbsp;'+'<span class="caret"></span>'+"</button>"+'<div class="dropdown-menu open">'+o+a+l+'<ul class="dropdown-menu inner selectpicker" role="menu">'+"</ul>"+"</div>"+"</div>";return e(d)},createView:function(){var e=this.createDropdown();var t=this.createLi();e.find("ul").append(t);return e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menu.find("ul").append(e)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var t=this,n=[],o=0;var a=function(e,t,i){return"<li"+(typeof i!=="undefined"?' class="'+i+'"':"")+(typeof t!=="undefined"|null===t?' data-original-index="'+t+'"':"")+">"+e+"</li>"};var l=function(e,n,o,a){var l=i(s(e));return'<a tabindex="0"'+(typeof n!=="undefined"?' class="'+n+'"':"")+(typeof o!=="undefined"?' style="'+o+'"':"")+(typeof a!=="undefined"?'data-optgroup="'+a+'"':"")+' data-normalized-text="'+l+'"'+">"+e+'<span class="'+t.options.iconBase+" "+t.options.tickIcon+' check-mark"></span>'+"</a>"};this.$element.find("option").each(function(){var i=e(this);var s=i.attr("class")||"",d=i.attr("style"),r=i.data("content")?i.data("content"):i.html(),c=typeof i.data("subtext")!=="undefined"?'<small class="muted text-muted">'+i.data("subtext")+"</small>":"",h=typeof i.data("icon")!=="undefined"?'<span class="'+t.options.iconBase+" "+i.data("icon")+'"></span> ':"",p=i.is(":disabled")||i.parent().is(":disabled"),f=i[0].index;if(h!==""&&p){h="<span>"+h+"</span>"}if(!i.data("content")){r=h+'<span class="text">'+r+c+"</span>"}if(t.options.hideDisabled&&p){return}if(i.parent().is("optgroup")&&i.data("divider")!==true){if(i.index()===0){o+=1;var u=i.parent().attr("label");var m=typeof i.parent().data("subtext")!=="undefined"?'<small class="muted text-muted">'+i.parent().data("subtext")+"</small>":"";var v=i.parent().data("icon")?'<span class="'+t.options.iconBase+" "+i.parent().data("icon")+'"></span> ':"";u=v+'<span class="text">'+u+m+"</span>";if(f!==0&&n.length>0){n.push(a("",null,"divider"))}n.push(a(u,null,"dropdown-header"))}n.push(a(l(r,"opt "+s,d,o),f))}else if(i.data("divider")===true){n.push(a("",f,"divider"))}else if(i.data("hidden")===true){n.push(a(l(r,s,d),f,"hide is-hidden"))}else{n.push(a(l(r,s,d),f))}});if(!this.multiple&&this.$element.find("option:selected").length===0&&!this.options.title){this.$element.find("option").eq(0).prop("selected",true).attr("selected","selected")}return e(n.join(""))},findLis:function(){if(this.$lis==null)this.$lis=this.$menu.find("li");return this.$lis},render:function(t){var i=this;if(t!==false){this.$element.find("option").each(function(t){i.setDisabled(t,e(this).is(":disabled")||e(this).parent().is(":disabled"));i.setSelected(t,e(this).is(":selected"))})}this.tabIndex();var n=this.options.hideDisabled?":not([disabled])":"";var o=this.$element.find("option:selected"+n).map(function(){var t=e(this);var s=t.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+t.data("icon")+'"></i> ':"";var n;if(i.options.showSubtext&&t.attr("data-subtext")&&!i.multiple){n=' <small class="muted text-muted">'+t.data("subtext")+"</small>"}else{n=""}if(t.data("content")&&i.options.showContent){return t.data("content")}else if(typeof t.attr("title")!=="undefined"){return t.attr("title")}else{return s+t.html()+n}}).toArray();var a=!this.multiple?o[0]:o.join(this.options.multipleSeparator);if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var l=this.options.selectedTextFormat.split(">");if(l.length>1&&o.length>l[1]||l.length==1&&o.length>=2){n=this.options.hideDisabled?", [disabled]":"";var d=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+n).length,r=typeof this.options.countSelectedText==="function"?this.options.countSelectedText(o.length,d):this.options.countSelectedText;a=r.replace("{0}",o.length.toString()).replace("{1}",d.toString())}}this.options.title=this.$element.attr("title");if(this.options.selectedTextFormat=="static"){a=this.options.title}if(!a){a=typeof this.options.title!=="undefined"?this.options.title:this.options.noneSelectedText}this.$button.attr("title",s(a));this.$newElement.find(".filter-option").html(a)},setStyle:function(e,t){if(this.$element.attr("class")){this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""))}var i=e?e:this.options.style;if(t=="add"){this.$button.addClass(i)}else if(t=="remove"){this.$button.removeClass(i)}else{this.$button.removeClass(this.options.style);this.$button.addClass(i)}},liHeight:function(){if(this.options.size===false)return;var e=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",false).end().appendTo("body"),t=e.addClass("open").find("> .dropdown-menu"),i=t.find("li").not(".divider").not(".dropdown-header").filter(":visible").children("a").outerHeight(),s=this.options.header?t.find(".popover-title").outerHeight():0,n=this.options.liveSearch?t.find(".bs-searchbox").outerHeight():0,o=this.options.actionsBox?t.find(".bs-actionsbox").outerHeight():0;e.remove();this.$newElement.data("liHeight",i).data("headerHeight",s).data("searchHeight",n).data("actionsHeight",o)},setSize:function(){this.findLis();var t=this,i=this.$menu,s=i.find(".inner"),n=this.$newElement.outerHeight(),o=this.$newElement.data("liHeight"),a=this.$newElement.data("headerHeight"),l=this.$newElement.data("searchHeight"),d=this.$newElement.data("actionsHeight"),r=this.$lis.filter(".divider").outerHeight(true),c=parseInt(i.css("padding-top"))+parseInt(i.css("padding-bottom"))+parseInt(i.css("border-top-width"))+parseInt(i.css("border-bottom-width")),h=this.options.hideDisabled?", .disabled":"",p=e(window),f=c+parseInt(i.css("margin-top"))+parseInt(i.css("margin-bottom"))+2,u,m,v,b=function(){m=t.$newElement.offset().top-p.scrollTop();v=p.height()-m-n};b();if(this.options.header)i.css("padding-top",0);if(this.options.size=="auto"){var $=function(){var e,n=t.$lis.not(".hide");b();u=v-f;if(t.options.dropupAuto){t.$newElement.toggleClass("dropup",m>v&&u-f<i.height())}if(t.$newElement.hasClass("dropup")){u=m-f}if(n.length+n.filter(".dropdown-header").length>3){e=o*3+f-2}else{e=0}i.css({"max-height":u+"px",overflow:"hidden","min-height":e+a+l+d+"px"});s.css({"max-height":u-a-l-d-c+"px","overflow-y":"auto","min-height":Math.max(e-c,0)+"px"})};$();this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",$);e(window).off("resize.getSize").on("resize.getSize",$);e(window).off("scroll.getSize").on("scroll.getSize",$)}else if(this.options.size&&this.options.size!="auto"&&i.find("li"+h).length>this.options.size){var g=this.$lis.not(".divider"+h).find(" > *").slice(0,this.options.size).last().parent().index();var x=this.$lis.slice(0,g+1).filter(".divider").length;u=o*this.options.size+x*r+c;if(t.options.dropupAuto){this.$newElement.toggleClass("dropup",m>v&&u<i.height())}i.css({"max-height":u+a+l+d+"px",overflow:"hidden"});s.css({"max-height":u-c+"px","overflow-y":"auto"})}},setWidth:function(){if(this.options.width=="auto"){this.$menu.css("min-width","0");var e=this.$newElement.clone().appendTo("body");var t=e.find("> .dropdown-menu").css("width");var i=e.css("width","auto").find("> button").css("width");e.remove();this.$newElement.css("width",Math.max(parseInt(t),parseInt(i))+"px")}else if(this.options.width=="fit"){this.$menu.css("min-width","");this.$newElement.css("width","").addClass("fit-width")}else if(this.options.width){this.$menu.css("min-width","");this.$newElement.css("width",this.options.width)}else{this.$menu.css("min-width","");this.$newElement.css("width","")}if(this.$newElement.hasClass("fit-width")&&this.options.width!=="fit"){this.$newElement.removeClass("fit-width")}},selectPosition:function(){var t=this,i="<div />",s=e(i),n,o,a=function(e){s.addClass(e.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",e.hasClass("dropup"));n=e.offset();o=e.hasClass("dropup")?0:e[0].offsetHeight;s.css({top:n.top+o,left:n.left,width:e[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){if(t.isDisabled()){return}a(e(this));s.appendTo(t.options.container);s.toggleClass("open",!e(this).hasClass("open"));s.append(t.$menu)});e(window).resize(function(){a(t.$newElement)});e(window).on("scroll",function(){a(t.$newElement)});e("html").on("click",function(i){if(e(i.target).closest(t.$newElement).length<1){s.removeClass("open")}})},setSelected:function(e,t){this.findLis();this.$lis.filter('[data-original-index="'+e+'"]').toggleClass("selected",t)},setDisabled:function(e,t){this.findLis();if(t){this.$lis.filter('[data-original-index="'+e+'"]').addClass("disabled").find("a").attr("href","#").attr("tabindex",-1)}else{this.$lis.filter('[data-original-index="'+e+'"]').removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)}},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var e=this;if(this.isDisabled()){this.$button.addClass("disabled").attr("tabindex",-1)}else{if(this.$button.hasClass("disabled")){this.$button.removeClass("disabled")}if(this.$button.attr("tabindex")==-1){if(!this.$element.data("tabindex"))this.$button.removeAttr("tabindex")}}this.$button.click(function(){return!e.isDisabled()})},tabIndex:function(){if(this.$element.is("[tabindex]")){this.$element.data("tabindex",this.$element.attr("tabindex"));this.$button.attr("tabindex",this.$element.data("tabindex"))}},clickListener:function(){var t=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()});this.$newElement.on("click",function(){t.setSize();if(!t.options.liveSearch&&!t.multiple){setTimeout(function(){t.$menu.find(".selected a").focus()},10)}});this.$menu.on("click","li a",function(i){var s=e(this),n=s.parent().data("originalIndex"),o=t.$element.val(),a=t.$element.prop("selectedIndex");if(t.multiple){i.stopPropagation()}i.preventDefault();if(!t.isDisabled()&&!s.parent().hasClass("disabled")){var l=t.$element.find("option"),d=l.eq(n),r=d.prop("selected"),c=d.parent("optgroup"),h=t.options.maxOptions,p=c.data("maxOptions")||false;if(!t.multiple){l.prop("selected",false);d.prop("selected",true);t.$menu.find(".selected").removeClass("selected");t.setSelected(n,true)}else{d.prop("selected",!r);t.setSelected(n,!r);s.blur();if(h!==false||p!==false){var f=h<l.filter(":selected").length,u=p<c.find("option:selected").length;if(h&&f||p&&u){if(h&&h==1){l.prop("selected",false);d.prop("selected",true);t.$menu.find(".selected").removeClass("selected");t.setSelected(n,true)}else if(p&&p==1){c.find("option:selected").prop("selected",false);d.prop("selected",true);var m=s.data("optgroup");t.$menu.find(".selected").has('a[data-optgroup="'+m+'"]').removeClass("selected");t.setSelected(n,true)}else{var v=typeof t.options.maxOptionsText==="function"?t.options.maxOptionsText(h,p):t.options.maxOptionsText,b=v[0].replace("{n}",h),$=v[1].replace("{n}",p),g=e('<div class="notify"></div>');if(v[2]){b=b.replace("{var}",v[2][h>1?0:1]);$=$.replace("{var}",v[2][p>1?0:1])}d.prop("selected",false);t.$menu.append(g);if(h&&f){g.append(e("<div>"+b+"</div>"));t.$element.trigger("maxReached.bs.select")}if(p&&u){g.append(e("<div>"+$+"</div>"));t.$element.trigger("maxReachedGrp.bs.select")}setTimeout(function(){t.setSelected(n,false)},10);g.delay(750).fadeOut(300,function(){e(this).remove()})}}}}if(!t.multiple){t.$button.focus()}else if(t.options.liveSearch){t.$searchbox.focus()}if(o!=t.$element.val()&&t.multiple||a!=t.$element.prop("selectedIndex")&&!t.multiple){t.$element.change()}}});this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(e){if(e.target==this){e.preventDefault();e.stopPropagation();if(!t.options.liveSearch){t.$button.focus()}else{t.$searchbox.focus()}}});this.$menu.on("click","li.divider, li.dropdown-header",function(e){e.preventDefault();e.stopPropagation();if(!t.options.liveSearch){t.$button.focus()}else{t.$searchbox.focus()}});this.$menu.on("click",".popover-title .close",function(){t.$button.focus()});this.$searchbox.on("click",function(e){e.stopPropagation()});this.$menu.on("click",".actions-btn",function(i){if(t.options.liveSearch){t.$searchbox.focus()}else{t.$button.focus()}i.preventDefault();i.stopPropagation();if(e(this).is(".bs-select-all")){t.selectAll()}else{t.deselectAll()}t.$element.change()});this.$element.change(function(){t.render(false)})},liveSearchListener:function(){var t=this,n=e('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){t.$menu.find(".active").removeClass("active");if(!!t.$searchbox.val()){t.$searchbox.val("");t.$lis.not(".is-hidden").removeClass("hide");if(!!n.parent().length)n.remove()}if(!t.multiple)t.$menu.find(".selected").addClass("active");setTimeout(function(){t.$searchbox.focus()},10)});this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()});this.$searchbox.on("input propertychange",function(){if(t.$searchbox.val()){if(t.options.searchAccentInsensitive){t.$lis.not(".is-hidden").removeClass("hide").find("a").not(":aicontains("+i(t.$searchbox.val())+")").parent().addClass("hide")}else{t.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+t.$searchbox.val()+")").parent().addClass("hide")}if(!t.$menu.find("li").filter(":visible:not(.no-results)").length){if(!!n.parent().length)n.remove();n.html(t.options.noneResultsText+' "'+s(t.$searchbox.val())+'"').show();t.$menu.find("li").last().after(n)}else if(!!n.parent().length){n.remove()}}else{t.$lis.not(".is-hidden").removeClass("hide");if(!!n.parent().length)n.remove()}t.$menu.find("li.active").removeClass("active");t.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus();e(this).focus()})},val:function(e){if(typeof e!=="undefined"){this.$element.val(e);this.render();return this.$element}else{return this.$element.val()}},selectAll:function(){this.findLis();this.$lis.not(".divider").not(".disabled").not(".selected").filter(":visible").find("a").click()},deselectAll:function(){this.findLis();this.$lis.not(".divider").not(".disabled").filter(".selected").filter(":visible").find("a").click()},keydown:function(t){var s=e(this),n=s.is("input")?s.parent().parent():s.parent(),o,a=n.data("this"),l,d,r,c,h,p,f,u,m={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(a.options.liveSearch)n=s.parent().parent();if(a.options.container)n=a.$menu;o=e("[role=menu] li a",n);u=a.$menu.parent().hasClass("open");if(!u&&/([0-9]|[A-z])/.test(String.fromCharCode(t.keyCode))){if(!a.options.container){a.setSize();a.$menu.parent().addClass("open");u=true}else{a.$newElement.trigger("click")}a.$searchbox.focus()}if(a.options.liveSearch){if(/(^9$|27)/.test(t.keyCode.toString(10))&&u&&a.$menu.find(".active").length===0){t.preventDefault();a.$menu.parent().removeClass("open");a.$button.focus()}o=e("[role=menu] li:not(.divider):not(.dropdown-header):visible",n);if(!s.val()&&!/(38|40)/.test(t.keyCode.toString(10))){if(o.filter(".active").length===0){if(a.options.searchAccentInsensitive){o=a.$newElement.find("li").filter(":aicontains("+i(m[t.keyCode])+")")}else{o=a.$newElement.find("li").filter(":icontains("+m[t.keyCode]+")")}}}}if(!o.length)return;if(/(38|40)/.test(t.keyCode.toString(10))){l=o.index(o.filter(":focus"));r=o.parent(":not(.disabled):visible").first().index();c=o.parent(":not(.disabled):visible").last().index();d=o.eq(l).parent().nextAll(":not(.disabled):visible").eq(0).index();h=o.eq(l).parent().prevAll(":not(.disabled):visible").eq(0).index();p=o.eq(d).parent().prevAll(":not(.disabled):visible").eq(0).index();if(a.options.liveSearch){o.each(function(t){if(e(this).is(":not(.disabled)")){e(this).data("index",t)}});l=o.index(o.filter(".active"));r=o.filter(":not(.disabled):visible").first().data("index");c=o.filter(":not(.disabled):visible").last().data("index");d=o.eq(l).nextAll(":not(.disabled):visible").eq(0).data("index");h=o.eq(l).prevAll(":not(.disabled):visible").eq(0).data("index");p=o.eq(d).prevAll(":not(.disabled):visible").eq(0).data("index")}f=s.data("prevIndex");if(t.keyCode==38){if(a.options.liveSearch)l-=1;if(l!=p&&l>h)l=h;if(l<r)l=r;if(l==f)l=c}if(t.keyCode==40){if(a.options.liveSearch)l+=1;if(l==-1)l=0;if(l!=p&&l<d)l=d;if(l>c)l=c;if(l==f)l=r}s.data("prevIndex",l);if(!a.options.liveSearch){o.eq(l).focus()}else{t.preventDefault();if(!s.is(".dropdown-toggle")){o.removeClass("active");o.eq(l).addClass("active").find("a").focus();s.focus()}}}else if(!s.is("input")){var v=[],b,$;o.each(function(){if(e(this).parent().is(":not(.disabled)")){if(e.trim(e(this).text().toLowerCase()).substring(0,1)==m[t.keyCode]){v.push(e(this).parent().index())}}});b=e(document).data("keycount");b++;e(document).data("keycount",b);$=e.trim(e(":focus").text().toLowerCase()).substring(0,1);if($!=m[t.keyCode]){b=1;e(document).data("keycount",b)}else if(b>=v.length){e(document).data("keycount",0);if(b>v.length)b=1}o.eq(v[b-1]).focus()}if((/(13|32)/.test(t.keyCode.toString(10))||/(^9$)/.test(t.keyCode.toString(10))&&a.options.selectOnTab)&&u){if(!/(32)/.test(t.keyCode.toString(10)))t.preventDefault();if(!a.options.liveSearch){e(":focus").click()}else if(!/(32)/.test(t.keyCode.toString(10))){a.$menu.find(".active a").click();s.focus()}e(document).data("keycount",0)}if(/(^9$|27)/.test(t.keyCode.toString(10))&&u&&(a.multiple||a.options.liveSearch)||/(27)/.test(t.keyCode.toString(10))&&!u){a.$menu.parent().removeClass("open");a.$button.focus()}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement);if(this.options.container)this.$menu.hide()},refresh:function(){this.$lis=null;this.reloadLi();this.render();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},update:function(){this.reloadLi();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()}};function o(t,i){var s=arguments;var o=t,t=s[0],i=s[1];[].shift.apply(s);if(typeof t=="undefined"){t=o}var a;var l=this.each(function(){var o=e(this);if(o.is("select")){var l=o.data("selectpicker"),d=typeof t=="object"&&t;if(!l){var r=e.extend({},n.DEFAULTS,e.fn.selectpicker.defaults||{},o.data(),d);o.data("selectpicker",l=new n(this,r,i))}else if(d){for(var c in d){if(d.hasOwnProperty(c)){l.options[c]=d[c]}}}if(typeof t=="string"){if(l[t]instanceof Function){a=l[t].apply(l,s)}else{a=l.options[t]}}}});if(typeof a!=="undefined"){return a}else{return l}}var a=e.fn.selectpicker;e.fn.selectpicker=o;e.fn.selectpicker.Constructor=n;e.fn.selectpicker.noConflict=function(){e.fn.selectpicker=a;return this};e(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",n.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(e){e.stopPropagation()});e(window).on("load.bs.select.data-api",function(){e(".selectpicker").each(function(){var t=e(this);o.call(t,t.data())})})})(e)}});